pure_pursuit:
  ros__parameters:
    waypoints_path: "/home/rcv/Desktop/PID_ws/src/PPcontroller/racelines/1016.csv"
    odom_topic: "/odom"
    car_refFrame: "base_link"
    global_refFrame: "map"
    drive_topic: "/drive"
    rviz_current_waypoint_topic: "/current_waypoint"
    rviz_lookahead_waypoint_topic: "/lookahead_waypoint"
    path_is_circular: true

    # Pure Pursuit Parameters
    # Lookahead is computed using the following: lookahead = min(max(min_lookahead, max_lookahead * curr_velocity / lookahead_ratio), max_lookahead);
    # min_lookahead: 0.5 # for square track
    min_lookahead: 0.8 # for larger track
    max_lookahead: 3.5 # lookahead when the car is going around max velocity
    lookahead_ratio: 6.5 # approximately the max velociy
    #K_p: 0.25 # for square track
    #K_p: 0.15 # for big track
    min_searching_idx_offset: 10
    max_searching_idx_offset: 40
    K_p: 0.6
    K_d: 0.06
    K_i: 0.000
    I_dist: 3
    heading_error_gain: 0.3
    steering_limit: 25.0
    velocity_percentage: 1.0 # the limit, can only do 1 lap with clean tires
    steer_reduction_speed_threshold: 4.0 # 조향감소 시작 속도m/s
    steer_reduction_constant_coef: 0.85  #조향감소 상수계수(스케일)
    steer_reduction_linear_coef: 0.15  #조향감소 선형계수(스케일)
    steer_reduction_min_scale: 0.2  #조향감소 하한치(스케일)
    speed_reduction_steer_angle_deg: 8.0  #속도 감소가 시작되는 감소량(deg)
    max_allowed_steer_drop_deg: 8.0  #최대 조향 감소량(최소 보장되는 스티어링 앵글(deg))
    speed_reduction_adjust: 0.0  #속도 제한 시 추가로 감속할 양(+이면 더 감속, -이면 완화)
    speed_reduction_prev_scale: 0.3  #이전 감속량 기반 추가 스케일 계수

waypoint_visualizer_node:
  ros__parameters:
    waypoints_path: "/home/rcv/Desktop/PID_ws/src/PPcontroller/racelines/1016.csv"
